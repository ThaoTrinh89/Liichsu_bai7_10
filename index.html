<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Cách mạng Công nghiệp - Lịch sử 10 | Bài 7</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@400;700&display=swap">
  <style>
    :root {
      --dark-bg: #191a23;
      --neon-orange: #ffad47;
      --neon-blue: #1ec8e9;
      --text-glow: 0 0 8px #fff, 0 0 25px var(--neon-blue);
      --neon-glow: 0 0 18px var(--neon-orange);
      --warm-light: #ffd6a0;
      --timeline-bg: #222430bb;
      --primary-font: 'Montserrat', sans-serif;
      --title-font: 'Orbitron', sans-serif;
    }
    html, body {
      padding: 0; margin: 0;
      background: var(--dark-bg);
      color: #fff;
      font-family: var(--primary-font);
      min-height: 100%;
      scroll-behavior: smooth;
      overflow: hidden;
    }
    .section {
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      transition: opacity 0.6s, transform 0.7s cubic-bezier(.77,.01,.23,1);
      opacity: 0;
      transform: scale(0.98) translateY(60px);
      pointer-events: none;
    }
    .section.active {
      opacity: 1;
      transform: scale(1) translateY(0);
      pointer-events: auto;
      transition-delay: 0s;
      z-index: 2;
    }
    .hero-title {
      font-family: var(--title-font);
      font-size: 2.7rem;
      color: var(--neon-orange);
      text-shadow: var(--text-glow), var(--neon-glow);
      margin: 0 0 22px 0;
      filter: blur(0.1px);
    }
    .hero-desc {
      font-size: 1.25rem;
      color: var(--warm-light);
      background: rgba(0,0,0,0.23);
      display: inline-block;
      padding: 12px 28px;
      border-radius: 10px;
      margin-bottom: 36px;
      box-shadow: 0 0 22px #1119, 0 3px 16px #ffad4777;
      text-align: center;
    }
    /* Máy móc & Nhân vật minh họa */
    .visuals {
      position: absolute;
      width: 100vw;
      left: 0; bottom: 0;
      z-index: 0;
      height: 270px;
      pointer-events: none;
      overflow: visible;
    }
    .steam-engine, .factory, .gear-set {
      position: absolute;
      filter: drop-shadow(0 8px 32px #000d);
      user-select: none;
    }
    .steam-engine {
      left: 8%; bottom: 0; width: 130px;
      animation: shake 8s infinite linear;
      z-index: 2;
    }
    .factory {
      right: 10%; bottom: 0; width: 200px;
      filter: blur(0.2px) brightness(1.14);
      z-index: 1;
    }
    .gear-set {
      left: 28%; bottom: 24px; width: 58px;
      z-index: 2;
      animation: gearspin 12s infinite linear;
    }
    .hist-figure {
      position: absolute; left: 67%;
      bottom: 22px; width: 92px;
      filter: drop-shadow(0 12px 58px #ffdd559a) contrast(1.09);
      transition: filter 0.2s;
      z-index: 3;
      user-select: none;
    }
    @keyframes gearspin {
      to { transform: rotate(1turn);}
    }
    @keyframes shake {
      0%,100% {transform:translateY(1px);}
      30% {transform:translateY(-5px);}
      60% {transform:translateY(0);}
    }

    /* Timeline - focusable, điều hướng phím */
    .timeline-overlay {
      position: fixed;
      bottom: 16px; left: 50%;
      transform: translateX(-50%);
      background: var(--timeline-bg);
      border-radius: 12px;
      box-shadow: 0 3px 18px #000b;
      padding: 11px 26px 11px 26px;
      display: flex; align-items: center;
      gap: 18px;
      z-index: 20;
      font-size: 1.04rem;
      outline:none;
    }
    .timeline-overlay:focus-within, .timeline-overlay:focus-visible {
      box-shadow: 0 0 0 3px var(--neon-blue), 0 3px 18px #2227;
    }
    .timeline-overlay .dot {
      width: 16px; height: 16px; border-radius: 50%;
      background: var(--neon-orange);
      box-shadow: 0 0 12px var(--neon-orange), 0 2px 8px #000b;
      display: inline-block;
      margin-right: 8px;
      border: 3px solid #fff3;
      cursor: pointer;
      outline:none;
      transition: box-shadow 0.2s, background 0.2s;
    }
    .timeline-overlay .dot.active {
      background: var(--neon-blue);
      box-shadow: 0 0 16px var(--neon-blue), 0 2px 15px #00d8ff88;
      border-color: #95f1ff;
    }
    .timeline-label {
      color: #ffe9b3bb;
      font-weight: 700;
      min-width: 70px;
      text-align: left;
      transition: color 0.2s;
      margin-left: .8em;
      outline: none;
    }

    /* Infographic */
    .infographic-section {
      width: 90vw;
      max-width: 700px;
      margin: auto;
      background: linear-gradient(120deg, #28304355, #191a23ee 100%);
      border-radius: 14px;
      padding: 26px;
      box-shadow: 0 5px 32px #000a;
      margin-bottom: 1.4em;
      outline: none;
    }
    .infographic-section h2 {
      color: var(--neon-blue);
      font-family: var(--title-font);
      text-shadow: var(--neon-glow);
      margin-bottom: 13px;
    }
    .chart-container { margin-top:18px; }
    canvas {
      width: 100% !important; max-width: 600px;
      background: #23262bee;
      border-radius: 8px;
      box-shadow: 0 0 13px #1ec8e938;
      display: block;
      margin: 0 auto;
    }

    /* Parallax Demo */
    .parallax-section {
      width: 100vw; min-height: 70vh;
      max-width: 750px;
      background: linear-gradient(180deg, #23262b 70%, #191a23 120%);
      display: flex; align-items: center; justify-content: center;
      flex-direction: column;
      margin: auto;
      border-radius: 14px;
      overflow: hidden;
      position: relative;
      outline: none;
    }
    .parallax-title {
      font-family: var(--title-font);
      color: var(--neon-orange);
      font-size: 1.5rem;
      text-shadow: var(--neon-glow);
      margin-bottom: 8px;
    }
    .parallax-element {
      width: 210px;
      filter: blur(0.3px) drop-shadow(0 3px 21px #1ec8e988);
      opacity: 0.84;
      will-change: transform;
      transition: transform 0.20s;
      user-select: none;
    }

    .highlight { color: var(--neon-orange); text-shadow: var(--text-glow); font-weight: bold;}
    .nav-keyhint {
      color:var(--neon-blue); font-size:0.98em; margin-left:1em; opacity:0.7;
      letter-spacing:1px
    }
    /* Accessibility & Responsive */
    @media (max-width: 700px){
      .hero-title { font-size: 1.45rem;}
      .visuals .steam-engine, .visuals .factory, .visuals .gear-set, .hist-figure {width:60vw; max-width:120px;}
      .infographic-section, .parallax-section { padding:14px 3vw;}
      .timeline-label {min-width: 48px;}
    }
    @media (max-width: 420px){
      canvas { max-width:97vw; }
    }
  </style>
</head>
<body tabindex="0">

  <div class="section active" id="section-0">
    <div class="hero-title">Cách mạng Công nghiệp thời hiện đại</div>
    <div class="hero-desc">
      Khám phá thời kỳ chuyển mình thế kỷ 19 với <span class="highlight">máy hơi nước</span>,
      <span class="highlight">nhà máy</span>, <span class="highlight">bánh răng quay</span>,
      cùng các nhân vật lịch sử làm thay đổi thế giới, qua góc nhìn <b>điện ảnh bán thực tế</b>.<br>
      <span class="nav-keyhint">[Mũi Tên Xuống/→] để chuyển tiếp</span>
    </div>
    <div class="visuals">
      <img src="https://img.icons8.com/color/512/steam-engine.png" alt="Steam Engine" class="steam-engine" />
      <img src="https://img.icons8.com/ios-filled/500/factory.png" alt="Factory" class="factory" />
      <img src="https://img.icons8.com/fluency/512/gear.png" alt="Gear Set" class="gear-set" style="animation-delay: -1s;" />
    </div>
    <img src="https://img.icons8.com/ios/256/napoleon-bonaparte.png" alt="Lịch sử nhân vật" class="hist-figure" />
  </div>

  <div class="section" id="section-1" tabindex="-1">
    <div class="infographic-section" id="chartSection" tabindex="0">
      <h2>Biểu đồ phát triển công nghiệp (thế kỷ 19)</h2>
      <div class="chart-container">
        <canvas id="industryChart" width="620" height="220" tabindex="-1"></canvas>
      </div>
      <div class="nav-keyhint">[↑/←] phần trước &nbsp; | &nbsp; [↓/→] tiếp theo</div>
    </div>
  </div>

  <div class="section" id="section-2" tabindex="-1">
    <div class="parallax-section" id="parallax-demo" tabindex="0">
      <div class="parallax-title">Hiệu ứng Parallax động</div>
      <img src="https://img.icons8.com/fluency/512/fire.png" alt="Khói động" class="parallax-element" tabindex="-1"/>
      <span style="color: #ffd6a0; font-size:1rem;margin-top:10px;">
        Dùng [Mũi tên] để qua lại trang, hoặc nhấn TAB, Enter để vào timeline dưới.
      </span>
    </div>
  </div>

  <!-- Timeline điều hướng, focusable -->
  <nav class="timeline-overlay" role="navigation" aria-label="Timeline lịch sử" tabindex="0">
    <button class="dot active" aria-label="Bối cảnh" tabindex="0" data-target="section-0"></button>
    <button class="dot" aria-label="Biểu đồ CN" tabindex="0" data-target="section-1"></button>
    <button class="dot" aria-label="Parallax" tabindex="0" data-target="section-2"></button>
    <span class="timeline-label" id="timeline-label" tabindex="0">Bối cảnh</span>
  </nav>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Section navigation
    const sections = [...document.querySelectorAll('.section')];
    let current = 0;
    function activateSection(idx) {
      if (idx<0||idx>=sections.length) return;
      sections.forEach((s,i)=>{
        if(i===idx){
          s.classList.add('active');
          s.setAttribute('tabindex','0');
          setTimeout(()=>s.focus(),120);
        }
        else {
          s.classList.remove('active');
          s.setAttribute('tabindex','-1');
        }
      });
      // timeline update
      timelineDots.forEach((d,i)=>d.classList.toggle('active',i===idx));
      timelineLabel.textContent = ["Bối cảnh","Biểu đồ CN","Parallax"][idx];
      current = idx;
    }
    // Keyboard navigation
    window.addEventListener('keydown',e=>{
      if(document.activeElement.tagName==="CANVAS") return; // Skip typing in chart
      if(['ArrowDown','ArrowRight','PageDown'].includes(e.key)){
        if(current<sections.length-1){activateSection(current+1);}
        e.preventDefault();
      }
      if(['ArrowUp','ArrowLeft','PageUp'].includes(e.key)){
        if(current>0){activateSection(current-1);}
        e.preventDefault();
      }
      if(e.key==="Tab"){
        // focus timeline if reach bottom
        if(current===sections.length-1){
          document.querySelector('.timeline-overlay').focus();
          e.preventDefault();
        }
      }
    });

    // Timeline nav with keyboard & mouse
    const timelineDots = [...document.querySelectorAll('.timeline-overlay .dot')];
    const timelineLabel = document.getElementById('timeline-label');
    timelineDots.forEach((dot,i)=>{
      dot.onclick = ()=> activateSection(i);
      dot.onkeyup = (e)=>{ if(e.key==='Enter'||e.key===" ")activateSection(i);}
      dot.onfocus = ()=> timelineLabel.textContent = ["Bối cảnh","Biểu đồ CN","Parallax"][i];
    });
    document.querySelector('.timeline-overlay').onkeyup = function(e){
      // Left/Right khi focus trên timeline
      let dotIdx = timelineDots.findIndex(d=>d===document.activeElement);
      if(e.key==="ArrowLeft" && dotIdx>0){
        timelineDots[dotIdx-1].focus();e.preventDefault();}
      if(e.key==="ArrowRight" && dotIdx<timelineDots.length-1){
        timelineDots[dotIdx+1].focus();e.preventDefault();}
    }

    // Chart demo
    new Chart(document.getElementById('industryChart').getContext('2d'), {
      type:"line",
      data:{
        labels:["1800","1820","1840","1860","1880","1900"],
        datasets:[
          {
            label:"Tổng sản lượng công nghiệp (tỉ chỉ số)",
            data:[40,98,310,900,1620,2170],
            backgroundColor:"rgba(30,200,233,0.19)",
            borderColor:"#1ec8e9",
            pointBackgroundColor:"#ffad47",
            borderWidth: 3,
            tension: 0.4,
            pointRadius: 4,
            fill:true
          }
        ]
      },
      options:{
        plugins:{
          legend:{labels:{color:"rgba(255,235,180,0.92)",font:{size:14}}},
        },
        scales:{
          x:{ticks:{color:"#ffdcb4",font:{size:12}}},
          y:{ticks:{color:"#f7f7f7"},grid:{color:"#1ec8e944"}}
        },
        responsive:true,
        maintainAspectRatio:false
      }
    });

    // Parallax effect: dùng mũi tên
    const pElem=document.querySelector('.parallax-element');
    let pOffset=0;
    window.addEventListener('keydown',e=>{
      if(sections[current].id!=="section-2")return;
      if(e.key==="ArrowLeft"){pOffset-=15;}
      if(e.key==="ArrowRight"){pOffset+=15;}
      pElem.style.transform=`translateX(${pOffset}px) scale(1.05)`;
    });

  </script>
</body>
</html>
